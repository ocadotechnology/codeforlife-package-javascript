{"version":3,"file":"session-XQO-pvx7.js","sources":["../src/middlewares/session.ts"],"sourcesContent":["import { type Middleware, isAction } from \"@reduxjs/toolkit\"\n\nimport { logout } from \"../utils/auth\"\n\nexport const logoutMiddleware: Middleware =\n  (\n    _, // eslint-disable-line @typescript-eslint/no-unused-vars\n  ) =>\n  next =>\n  action => {\n    const response = next(action)\n\n    // The backend should delete these cookie upon calling the logout endpoint.\n    // However, as a precaution, we also delete the session cookies in case the\n    // backend fails to delete the cookies.\n    if (isAction(action) && action.type === \"session/logout\") {\n      logout()\n    }\n\n    return response\n  }\n"],"names":["logoutMiddleware","_","next","action","response","isAction","logout"],"mappings":";;AAIO,MAAMA,IACX,CACEC,MAEF,CAAAC,MACA,CAAAC,MAAU;AACR,QAAMC,IAAWF,EAAKC,CAAM;AAK5B,SAAIE,EAASF,CAAM,KAAKA,EAAO,SAAS,oBACtCG,EAAA,GAGKF;AACT;"}