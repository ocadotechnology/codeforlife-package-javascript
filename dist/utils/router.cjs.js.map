{"version":3,"file":"router.cjs.js","sources":["../../src/utils/router.ts"],"sourcesContent":["import {\n  type To,\n  type LinkProps as _LinkProps,\n  generatePath,\n} from \"react-router\"\n\nimport { type PageState } from \"../components/page/Page\"\n\nexport type LinkProps<\n  Override extends \"delta\" | \"to\",\n  State extends Record<string, any> = Record<string, any>,\n> = Omit<_LinkProps, \"to\" | \"state\"> &\n  (Override extends \"delta\"\n    ? { to: number }\n    : { to: To; state?: State & Partial<PageState> })\n\nexport type ReadOnly<T> = {\n  readonly [P in keyof T]: T[P]\n}\n\nexport type Parameters = Record<string, string>\n\nexport interface Path {\n  _: string\n  __: string | Parameters\n  [subpath: string]: string | Path | Parameters\n}\n\nexport function path<Subpaths extends Record<string, Path>>(\n  _: string | Parameters,\n  subpaths: Subpaths = {} as Subpaths,\n): Path & Subpaths {\n  function updatePath(path: Path, root: boolean, params?: Parameters) {\n    if (typeof path.__ === \"object\") {\n      params = params ? { ...params, ...path.__ } : path.__\n    }\n\n    const _path = typeof _ === \"string\" && params ? generatePath(_, params) : _\n\n    Object.entries(path).forEach(([key, subpath]) => {\n      if (key !== \"__\") {\n        subpath = subpath as string | Path\n        if (typeof subpath === \"string\") {\n          if (typeof _path === \"string\" && (!root || key !== \"_\")) {\n            let __path = _path + subpath\n            if (__path.endsWith(\"/\")) __path = __path.slice(0, -1)\n            path[key] = __path\n          }\n        } else {\n          updatePath(subpath, false, params)\n        }\n      }\n    })\n  }\n\n  const path = { ...subpaths, _: typeof _ === \"string\" ? _ : \"\", __: _ }\n  if (_ === \"\") {\n    path._ = \"/\"\n  } else {\n    updatePath(path, true)\n  }\n  return path\n}\n\nexport function getParam(path: Path, key: string) {\n  return (path.__ as Parameters)[key]\n}\n"],"names":["path","_","subpaths","updatePath","root","params","_path","generatePath","key","subpath","__path","getParam"],"mappings":"yRA4BO,SAASA,EACdC,EACAC,EAAqB,GACJ,CACjB,SAASC,EAAWH,EAAYI,EAAeC,EAAqB,CAC9D,OAAOL,EAAK,IAAO,WACrBK,EAASA,EAAS,CAAE,GAAGA,EAAQ,GAAGL,EAAK,EAAA,EAAOA,EAAK,IAGrD,MAAMM,EAAQ,OAAOL,GAAM,UAAYI,EAASE,eAAaN,EAAGI,CAAM,EAAIJ,EAE1E,OAAO,QAAQD,CAAI,EAAE,QAAQ,CAAC,CAACQ,EAAKC,CAAO,IAAM,CAC/C,GAAID,IAAQ,KAEV,GADAC,EAAUA,EACN,OAAOA,GAAY,UACrB,GAAI,OAAOH,GAAU,WAAa,CAACF,GAAQI,IAAQ,KAAM,CACvD,IAAIE,EAASJ,EAAQG,EACjBC,EAAO,SAAS,GAAG,MAAYA,EAAO,MAAM,EAAG,EAAE,GACrDV,EAAKQ,CAAG,EAAIE,CACd,OAEAP,EAAWM,EAAS,GAAOJ,CAAM,CAGvC,CAAC,CACH,CAEA,MAAML,EAAO,CAAE,GAAGE,EAAU,EAAG,OAAOD,GAAM,SAAWA,EAAI,GAAI,GAAIA,CAAA,EACnE,OAAIA,IAAM,GACRD,EAAK,EAAI,IAETG,EAAWH,EAAM,EAAI,EAEhBA,CACT,CAEO,SAASW,EAASX,EAAYQ,EAAa,CAChD,OAAQR,EAAK,GAAkBQ,CAAG,CACpC"}