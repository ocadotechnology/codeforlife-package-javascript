{"version":3,"file":"router.es.js","sources":["../../src/utils/router.ts"],"sourcesContent":["import {\n  type To,\n  type LinkProps as _LinkProps,\n  generatePath,\n} from \"react-router-dom\"\n\nimport { type PageState } from \"../components/page/Page\"\n\nexport type LinkProps<\n  Override extends \"delta\" | \"to\",\n  State extends Record<string, any> = Record<string, any>,\n> = Omit<_LinkProps, \"to\" | \"state\"> &\n  (Override extends \"delta\"\n    ? { to: number }\n    : { to: To; state?: State & Partial<PageState> })\n\nexport type ReadOnly<T> = {\n  readonly [P in keyof T]: T[P]\n}\n\nexport type Parameters = Record<string, string>\n\nexport interface Path {\n  _: string\n  __: string | Parameters\n  [subpath: string]: string | Path | Parameters\n}\n\nexport function path<Subpaths extends Record<string, Path>>(\n  _: string | Parameters,\n  subpaths: Subpaths = {} as Subpaths,\n): Path & Subpaths {\n  function updatePath(path: Path, root: boolean, params?: Parameters) {\n    if (typeof path.__ === \"object\") {\n      params = params ? { ...params, ...path.__ } : path.__\n    }\n\n    const _path = typeof _ === \"string\" && params ? generatePath(_, params) : _\n\n    Object.entries(path).forEach(([key, subpath]) => {\n      if (key !== \"__\") {\n        subpath = subpath as string | Path\n        if (typeof subpath === \"string\") {\n          if (typeof _path === \"string\" && (!root || key !== \"_\")) {\n            let __path = _path + subpath\n            if (__path.endsWith(\"/\")) __path = __path.slice(0, -1)\n            path[key] = __path\n          }\n        } else {\n          updatePath(subpath, false, params)\n        }\n      }\n    })\n  }\n\n  const path = { ...subpaths, _: typeof _ === \"string\" ? _ : \"\", __: _ }\n  if (_ === \"\") {\n    path._ = \"/\"\n  } else {\n    updatePath(path, true)\n  }\n  return path\n}\n\nexport function getParam(path: Path, key: string) {\n  return (path.__ as Parameters)[key]\n}\n"],"names":["path","_","subpaths","updatePath","root","params","_path","generatePath","key","subpath","__path","getParam"],"mappings":";;;;;;;AA4BO,SAASA,EACdC,GACAC,IAAqB,IACJ;AACjB,WAASC,EAAWH,GAAYI,GAAeC,GAAqB;AAClE,IAAI,OAAOL,EAAK,MAAO,aACrBK,IAASA,IAAS,EAAE,GAAGA,GAAQ,GAAGL,EAAK,GAAA,IAAOA,EAAK;AAGrD,UAAMM,IAAQ,OAAOL,KAAM,YAAYI,IAASE,EAAaN,GAAGI,CAAM,IAAIJ;AAE1E,WAAO,QAAQD,CAAI,EAAE,QAAQ,CAAC,CAACQ,GAAKC,CAAO,MAAM;AAC/C,UAAID,MAAQ;AAEV,YADAC,IAAUA,GACN,OAAOA,KAAY;AACrB,cAAI,OAAOH,KAAU,aAAa,CAACF,KAAQI,MAAQ,MAAM;AACvD,gBAAIE,IAASJ,IAAQG;AACrB,YAAIC,EAAO,SAAS,GAAG,UAAYA,EAAO,MAAM,GAAG,EAAE,IACrDV,EAAKQ,CAAG,IAAIE;AAAA,UACd;AAAA;AAEA,UAAAP,EAAWM,GAAS,IAAOJ,CAAM;AAAA,IAGvC,CAAC;AAAA,EACH;AAEA,QAAML,IAAO,EAAE,GAAGE,GAAU,GAAG,OAAOD,KAAM,WAAWA,IAAI,IAAI,IAAIA,EAAA;AACnE,SAAIA,MAAM,KACRD,EAAK,IAAI,MAETG,EAAWH,GAAM,EAAI,GAEhBA;AACT;AAEO,SAASW,EAASX,GAAYQ,GAAa;AAChD,SAAQR,EAAK,GAAkBQ,CAAG;AACpC;"}