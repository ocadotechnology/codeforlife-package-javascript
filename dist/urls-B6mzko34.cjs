"use strict";const A=require("js-cookie"),T=require("./settings/index.cjs.js"),p=require("@reduxjs/toolkit"),d=require("./jsx-runtime-CeSfJrVB.cjs"),f=require("@mui/material");require("react");const L=require("./general-ByvaleXK.cjs");require("yup");const k=require("@mui/icons-material"),S=p.buildCreateSlice({creators:{asyncThunk:p.asyncThunkCreator}}),R={isLoggedIn:!!A.get(T.SESSION_METADATA_COOKIE_NAME)},h=S({name:"session",initialState:R,reducers:e=>({login:e.reducer(t=>{t.isLoggedIn=!0}),logout:e.reducer(t=>{t.isLoggedIn=!1})}),selectors:{selectIsLoggedIn:e=>e.isLoggedIn}}),{login:q,logout:O}=h.actions,{selectIsLoggedIn:C}=h.selectors,y=()=>d.jsxRuntimeExports.jsxs(f.Stack,{alignItems:"center",alignContent:"center",children:[d.jsxRuntimeExports.jsx(k.SyncProblem,{color:"error"}),d.jsxRuntimeExports.jsx(f.Typography,{color:"error.main",children:"Failed to sync data"})]});function I(e,t){if(t.url&&Object.entries(t.url).forEach(([n,i])=>{e=e.replace(`<${n}>`,String(i))}),t.search){const n=[];for(const i in t.search){const c=t.search[i];if(c!==void 0)if(Array.isArray(c))for(const o of c)n.push([i,String(o)]);else n.push([i,String(c)])}n.length!==0&&(e+=`?${new URLSearchParams(n).toString()}`)}return e}function g(e){return typeof e=="number"||typeof e=="string"}function x(e){return{type:e,id:"LIST"}}function E(e,t){const{includeListTag:n=!1,argKeysAreIds:i=!1,id:c="id"}=t||{};function o(r,l=n){const s=r.map(b=>({type:e,id:String(b)}));return l&&s.push(x(e)),s}function u(r){return L.getNestedProperty(r,c)}return(r,l,s)=>{if(!l){if(s){if(g(s))return o([s]);if(Array.isArray(s)){if(s.length&&g(s[0]))return o(s)}else if(typeof s=="object"&&i)return o(Object.keys(s))}if(r)return Array.isArray(r)?o(r.map(u)):u(r)!==void 0?o([u(r)]):o(r.data.map(u),!0)}return o([])}}function a(e,t){if(e===t)throw Error("List and detail are the same.");return{list:e,detail:t}}function m(e,t,n){const{data:i,isLoading:c,isSuccess:o}=e,u=e.error,{loading:r=d.jsxRuntimeExports.jsx(f.CircularProgress,{}),error:l=d.jsxRuntimeExports.jsx(y,{})}=n||{};if(u)return console.error(u),l;if(c)return r;if(i)return t(i);if(o)throw Error("Expected to get data from API but got nothing.");return r}function j(e){return["GET","HEAD","OPTIONS","TRACE"].includes(e.toUpperCase())}const M=Object.freeze(Object.defineProperty({__proto__:null,buildUrl:I,handleResultState:m,isModelId:g,isSafeHttpMethod:j,listTag:x,modelUrls:a,tagData:E},Symbol.toStringTag,{value:"Module"})),P={user:a("users/","users/<id>/"),teacher:a("users/teachers/","users/teachers/<id>/"),student:a("users/students/","users/students/<id>/"),school:a("schools/","schools/<id>/"),class:a("classes/","classes/<id>/"),otpBypassToken:a("otp-bypass-tokens/","otp-bypass-tokens/<id>/"),authFactor:a("auth-factors/","auth-factors/<id>/")};exports.SyncError=y;exports.api=M;exports.buildUrl=I;exports.createSlice=S;exports.handleResultState=m;exports.isSafeHttpMethod=j;exports.login=q;exports.logout=O;exports.selectIsLoggedIn=C;exports.sessionSlice=h;exports.tagData=E;exports.urls=P;
//# sourceMappingURL=urls-B6mzko34.cjs.map
