"use strict";const T=require("js-cookie"),S=require("./general-CWsWbQnR.cjs"),p=require("@reduxjs/toolkit"),d=require("./jsx-runtime-CeSfJrVB.cjs"),f=require("@mui/material");require("react");require("yup");const L=require("@mui/icons-material"),y=p.buildCreateSlice({creators:{asyncThunk:p.asyncThunkCreator}}),k={isLoggedIn:!!T.get(S.SESSION_METADATA_COOKIE_NAME)},h=y({name:"session",initialState:k,reducers:e=>({login:e.reducer(r=>{r.isLoggedIn=!0}),logout:e.reducer(r=>{r.isLoggedIn=!1})}),selectors:{selectIsLoggedIn:e=>e.isLoggedIn}}),{login:R,logout:O}=h.actions,{selectIsLoggedIn:q}=h.selectors,I=()=>d.jsxRuntimeExports.jsxs(f.Stack,{alignItems:"center",alignContent:"center",children:[d.jsxRuntimeExports.jsx(L.SyncProblem,{color:"error"}),d.jsxRuntimeExports.jsx(f.Typography,{color:"error.main",children:"Failed to sync data"})]});function E(e,r){if(r.url&&Object.entries(r.url).forEach(([n,i])=>{e=e.replace(`<${n}>`,String(i))}),r.search){const n=[];for(const i in r.search){const c=r.search[i];if(c!==void 0)if(Array.isArray(c))for(const o of c)n.push([i,String(o)]);else n.push([i,String(c)])}n.length!==0&&(e+=`?${new URLSearchParams(n).toString()}`)}return e}function g(e){return typeof e=="number"||typeof e=="string"}function m(e){return{type:e,id:"LIST"}}function x(e,r){const{includeListTag:n=!1,argKeysAreIds:i=!1,id:c="id"}=r||{};function o(t,l=n){const s=t.map(A=>({type:e,id:String(A)}));return l&&s.push(m(e)),s}function u(t){return S.getNestedProperty(t,c)}return(t,l,s)=>{if(!l){if(s){if(g(s))return o([s]);if(Array.isArray(s)){if(s.length&&g(s[0]))return o(s)}else if(typeof s=="object"&&i)return o(Object.keys(s))}if(t)return Array.isArray(t)?o(t.map(u)):u(t)!==void 0?o([u(t)]):o(t.data.map(u),!0)}return o([])}}function a(e,r){if(e===r)throw Error("List and detail are the same.");return{list:e,detail:r}}function j(e,r,n){const{data:i,isLoading:c,isSuccess:o}=e,u=e.error,{loading:t=d.jsxRuntimeExports.jsx(f.CircularProgress,{}),error:l=d.jsxRuntimeExports.jsx(I,{})}=n||{};if(u)return console.error(u),l;if(c)return t;if(i)return r(i);if(o)throw Error("Expected to get data from API but got nothing.");return t}function b(e){return["GET","HEAD","OPTIONS","TRACE"].includes(e.toUpperCase())}const C=Object.freeze(Object.defineProperty({__proto__:null,buildUrl:E,handleResultState:j,isModelId:g,isSafeHttpMethod:b,listTag:m,modelUrls:a,tagData:x},Symbol.toStringTag,{value:"Module"})),M={user:a("users/","users/<id>/"),teacher:a("users/teachers/","users/teachers/<id>/"),student:a("users/students/","users/students/<id>/"),school:a("schools/","schools/<id>/"),class:a("classes/","classes/<id>/"),otpBypassToken:a("otp-bypass-tokens/","otp-bypass-tokens/<id>/"),authFactor:a("auth-factors/","auth-factors/<id>/")};exports.SyncError=I;exports.api=C;exports.buildUrl=E;exports.createSlice=y;exports.handleResultState=j;exports.isSafeHttpMethod=b;exports.login=R;exports.logout=O;exports.selectIsLoggedIn=q;exports.sessionSlice=h;exports.tagData=x;exports.urls=M;
//# sourceMappingURL=urls-D-pIgqoF.cjs.map
